# Search Results for: What is NOBSGP?

Keywords: nobsgp

## Variations
1. What is NOBSGP?
2. Explain what NOBSGP is
3. Define NOBSGP
4. Describe NOBSGP
5. Tell me about NOBSGP


## Context

### Summary
**NPAR (total parameters), NOBS (observations, excluding dummy), NPARGP (parameter groups), NPRIOR (prior information items), and NOBSGP (observation groups) are integer variables in the PEST control file.  In "estimation" mode, adjustable parameters should not exceed weighted observations plus prior information, unless using SVD or LSQR. MAXCOMPDIM (optional) activates compressed Jacobian matrix storage.**

### Header
**4.2.4 Third Line**

### Content
NPAR
This is the total number of parameters featured in the current PEST case, including adjustable, fixed and tied parameters; NPAR must be supplied as an integer.
NOBS
This integer variable represents the total number of observations featured in the current case. Note that, when counting the number of observations, dummy observations (see chapter 2) that may be featured in one or a number of instruction files are ignored.
NPARGP
This is the number of parameter groups. Recall from the previous chapter that the variables which govern the operation of finite-difference derivatives are assigned to parameter groups. Parameter grouping can also be of importance where the ADDREG1 utility described in part II of this manual is employed to add preferred value Tikhonov regularisation to a PEST control file. NPARGP is an integer variable.
NPRIOR
NPRIOR, another integer variable, is the number of articles of prior information that are included in the parameter estimation process. If there are no articles of prior information, NPRIOR must be zero. If PEST is running in “estimation” mode, then you should ensure that the number of adjustable parameters is less than or equal to the number of observations for which there are non-zero weights plus the number of articles of prior information for which there are non-zero weights. If this is not the case, then the inverse problem cannot possibly have a unique solution. Furthermore, unless solution of this nonunique inverse problem is sought using singular value decomposition or LSQR, PEST may make little progress in lowering the objective function because the XtQX matrix appearing in equation 5.2.9 of Doherty (2015) will be singular and hence non-invertible. Sadly, nonuniqueness is the rule rather than the exception when calibrating environmental models. PEST is not troubled by parameter nonuniqueness if Tikhonov regularisation is introduced to the inverse problem, and if singular value decomposition or LSQR is used in solution of that problem. Because of the prevalence of nonuniqueness in environmental model calibration, this should be done as a matter of course. (The outnumbering of observations by parameters does not create a numerical problem if singular value decomposition or LSQR are used to solve the inverse problem, despite the noninvertability of XtQX.)
NOBSGP
NOBSGP, another integer variable, is the number of observation groups featured in the PEST control file. Each observation and each prior information equation must be assigned to an observation group (they can all be assigned to the same group if desired). When PEST evaluates the total objective function it also evaluates the contribution made to this total by each observation group.
MAXCOMPDIM
MAXCOMPDIM is an optional integer variable. It is used to activate compressed internal storage of the Jacobian matrix by PEST. This can slow PEST execution. At the same time it can allow PEST to undertake very highly parameterized inversion wherein adjustable parameters may number in the tens of thousands. This is further discussed in section 15.4.

### Source
- **File Name:** PEST Model-Independent Parameter Estimation. User Manual Part I: PEST, SENSAN and Global Optimisers
- **Main Section:** 4. The PEST Control File
- **Subsection:** 4.2 Control Data Section

### Additional Summaries
- **Higher-Level Summary:** Figure 4.2 in PEST software displays control data section variables. The text details options for writing matrices, files, and parameters, including settings for matrix and file saving, operational modes, precision, derivative handling, and convergence criteria. Optional features like sensitivity reuse and LSQR algorithm for solving inverse problems are discussed.
- **Detailed Summary:** Figure 4.2 shows "control data" section variables (from Appendix A, Figure A1.1).  Some variables are discussed later. The first line must be "* control data";  some variables are optional (in brackets).

### Related Context
- **Previous Summary:** RSTFLE ("restart" or "norestart") enables PEST's restart capability (Appendix B). PESTMODE ("estimation", "prediction", "regularisation", or "pareto") selects the operational mode;  additional mode-specific sections may be included.
- **Next Summary:** DERZEROLIM (optional) defines a Jacobian matrix zero threshold for compressed storage. NTPLFLE is the number of template files; NINSFLE is the number of instruction files. PRECIS ("single" or "double") sets precision. DPOINT ("point" or "nopoint") controls decimal point inclusion. NUMCOM, JACFILE, MESSFILE (Chapter 12) handle model-calculated derivatives. OBSREREF (Chapter 14) activates observation re-referencing.

### Metadata
- **Keywords:** MAXCOMPDIM, NOBS, NOBSGP, NPAR, NPARGP, NPRIOR
- **Chunk ID:** 26873b456a9c
- **Chunk Index:** 1
- **Previous Chunk ID:** 9b2451e25955
- **Next Chunk ID:** e611a7673cad

---

## Context

### Summary
**NPAR, NOBS, NPARGP, NPRIOR, and NOBSGP (integers, >0 except NPRIOR which can be 0) specify parameter, observation, and group counts from respective PEST control file sections.  PEST++ programs only use the first variable on this line; however, PESTCHEK requires correct values for all variables.**

### Header
**4.6.4 Third Line **

### Content
Although programs of the PEST++ suite read only the first variable on this line, the other variables that are featured on this line in figure 4.3 must be set to correct values to pass the scrutiny of PESTCHEK. All of these variables are integers. Their values must be greater than zero, except for NPRIOR which can be zero.
NPAR is the number of parameters featured in the “parameter data” section of a PEST control file. NOBS is the number of observations featured in the “observation data” section of a PEST control file. NPARGP is the number of parameter groups featured in the “parameter groups” section, while NPRIOR is the number of prior information equations featured in the “prior information” section of a PEST control file. The final variable on this line (NOBSGP) is the number of observation groups featured in the “observation groups” section of a PEST control file.

### Source
- **File Name:** PEST Model-Independent Parameter Estimation: PEST++ a Software Suite for Parameter Estimation, Uncertainty Analysis, Management Optimization and Sensitivity Analysis
- **Main Section:** 4. The PEST Control File
- **Subsection:** 4.6 Control Data Section

### Additional Summaries
- **Higher-Level Summary:** Figure 4.2 in PEST software displays control data section variables. The text details options for writing matrices, files, and parameters, including settings for matrix and file saving, operational modes, precision, derivative handling, and convergence criteria. Optional features like sensitivity reuse and LSQR algorithm for solving inverse problems are discussed.
- **Detailed Summary:** The optional "automatic user intervention" section (section 6.3) governs automatic user intervention, activated by setting DOAUI to "doaui" in the "control data" section.  If omitted, default values are used.

### Related Context
- **Previous Summary:** RSTFLE ("restart") enables PEST's restart capability. PESTMODE ("estimation" or "regularization") sets the operational mode;  "regularization" mode uses the "regularization" section (or defaults if absent).
- **Next Summary:** NTPFLE and NINSFLE (integers >1) specify template and instruction file counts.  PRECIS ("single") and DPOINT ("point") control parameter value formatting (not used by PEST++). NUMCOM (integer, 1 or omitted for single command lines) specifies the number of model command lines.  These variables are used by PEST but not PEST++.

### Metadata
- **Keywords:** NOBS, NOBSGP, NPAR, NPARGP, NPRIOR
- **Chunk ID:** 255d2e8af039
- **Chunk Index:** 1
- **Previous Chunk ID:** 07ced7dc7c05
- **Next Chunk ID:** 9813ada0b4b7

---

## Context

### Summary
**SUBREG1 removes regularization from a PEST control file (case1), creating a new one (case2). It sets PESTMODE to "estimation", removes "regul" groups and associated observations/prior information from the control file, updating NOBSGP, NOBS, and NPRIOR.  Instruction files are not modified; use PESTCHEK before running PEST.  Use `subreg1 case1 case2`.**

### Header
**4.12 SUBREG1**

### Content
As the name suggests, SUBREG1 performs the opposite task to that of ADDREG1; it subtracts regularisation from a PEST control file. It is run using the command
subreg1 case1 case2
where
- case1 is the filename base or full name of an existing PEST control file, and
- case2 is the filename base or full name of a new PEST control file.
SUBREG1 undertakes the following tasks when writing the new PEST control file:
1. It alters the PESTMODE variable to “estimation”.
2. It removes from the “observation groups” section of the PEST control file all observation groups whose names begin with “regul”; the value of the NOBSGP variable in the “control data” section of the new PEST control file is reduced accordingly.
3. It removes from the “observation data” section of the PEST control file all observations that belong to observation groups whose names begin with “regul”; the value of the NOBS variable in the “control data” section of the new PEST control file is reduced accordingly.
4. It removes from the “prior information” section of the PEST control file all prior information equations that belong to observation groups whose names begin with “regul”; the value of the NPRIOR variable in the “control data” section is reduced accordingly.
SUBREG1 does not remove or alter any instruction files. Hence if observations are removed from the “observation data” section of the PEST control file, an incompatibility will exist between the new PEST control file and the names of instruction files cited in that file. The task of rectifying this incompatibility belongs to the user. Do not run PEST on the new PEST control file until PESTCHEK gives you the all‑clear.

### Source
- **File Name:** PEST Model-Independent Parameter Estimation User Manual Part II: PEST Utility Support Software
- **Main Section:** 4. Building and Altering a PEST Control File
- **Subsection:** 

### Additional Summaries
- **Higher-Level Summary:** Figure 4.2 in PEST software displays control data section variables. The text details options for writing matrices, files, and parameters, including settings for matrix and file saving, operational modes, precision, derivative handling, and convergence criteria. Optional features like sensitivity reuse and LSQR algorithm for solving inverse problems are discussed.
- **Detailed Summary:** 

### Related Context
- **Previous Summary:** ADDCOVMAT adds covariance matrices to a PEST control file (case1), creating a new one (case2), using a covmatfile (Figure 4.4) linking observation groups to covariance matrix files.  Comment lines (#) are ignored.  Covariance filenames are quoted if they contain spaces.  It's useful for automating covariance matrix addition, particularly in batch processes.
- **Next Summary:** SIMCASE simplifies a PEST control file (case1), creating a new one (case2), by removing regularization data, tied/fixed parameters, empty groups, and zero-weighted observations.  It sets PESTMODE to "estimation" and uses dummy values.  Use PESTCHEK (`/s` switch) and JCOCHEK to validate the output.  WTFACTOR multiplies weights for a specified observation group (obsgroup) by a factor (factor) in pestfile1, creating pestfile2.  It halts if a prior information equation's weight/group is split across lines.

### Metadata
- **Keywords:** NOBS, NOBSGP, NPRIOR, PESTMODE
- **Chunk ID:** 8dfcec65eff8
- **Chunk Index:** 1
- **Previous Chunk ID:** 0640b306a560
- **Next Chunk ID:** b257a34682e9

---

## Context

### Summary
**PESTCHEK verifies PEST input datasets (control, template, and instruction files), checking for syntax errors and consistency (including parameter/observation counts, bounds, transformations, and prior information). It ignores PEST++-specific variables ("++" prefix) but can partially check PEST++ datasets.  Use `pestchek case`; the `/s` switch omits template/instruction file checks. *CHECK_TPLINS* (Boolean) controls parameter/observation alignment checks.**

### Header
**4.5 The PESTCHEK Utility**

### Content
PESTCHEK is a utility program that is supplied with the PEST suite. It reads an entire PEST input dataset, this being comprised of a PEST control file and all template and instruction files cited therein. It checks all of these files for correctness and consistency. In doing so, it performs all of the tasks performed by the TEMPCHEK and INSCHEK utilities that were mentioned in chapter 2 of this manual. However, it goes further than this. It ensures that any parameter that is cited in a template file is also cited in a PEST control file (and vice versa), and that any observation that is cited in an instruction file is also cited in the PEST control file (and vice versa). The benefits of such checking are obvious.
PESTCHEK also subjects a PEST control file to thorough error and consistency checking. For example, it informs a user if a parameter is not between its upper and lower bounds, or if a parameter which is denoted as being log-transformed is endowed with a zero or negative initial value. It checks that the number of tied-parent parameter relationships that are provided in the second half of the “parameter data” section of a PEST control file are in accordance with the number of parameters that are denoted as being tied in the first half of this section. Consistency checks are made between equations comprising the “prior information” section of a PEST control file and the transformation status of parameters in the “parameter data” section of the PEST control file.
PESTCHEK ignores lines in a PEST control file that begin with the “++” string. Hence it performs no checking of control variables that are specific to members of the PEST++ suite. The above examples of its checking functionality indicate, however, that it can still be used to at least partially ensure the quality of a PEST++ input dataset. However, if it is to provide this service, certain conditions must be met. These include the following.
- Variables such as NOBS, NPARGP, NOBSGP and NPRIOR that are ignored by programs of the PEST++ suite, but that are read by PESTCHEK (and PEST), should have the correct values. These indicate the number of observations, parameter groups, observation groups and prior information equations respectively that are featured in a PEST control file. (Programs of the PEST++ suite evaluate these numbers themselves based on the contents of respective sections of a PEST control file.)
- Control variables such as those which govern PEST’s calculation of the Marquardt lambda (RLAMBDA1, RLAMFAC, PHIRATSUF, PHIREDLAM and NUMLAM) should be coherent. Suitable values are suggested below for these and other variables, though little will be said about their usage by PEST.
Variables appearing in a PEST control file which are used by members of the PEST++ suite are now described. At the same time, sensible, PESTCHEK-safe placeholder values are provided for all variables whose presence is required in a PEST control file, but which are not actually used by members of the PEST++ suite. The interested reader is referred to part I of the PEST manual for further details.
Note that all of the PEST++ tools will check that the parameters and observations between the control file and template/instruction files are aligned. This checking can be disabled by setting *CHECK_TPLINS* to false.

### Source
- **File Name:** PEST Model-Independent Parameter Estimation: PEST++ a Software Suite for Parameter Estimation, Uncertainty Analysis, Management Optimization and Sensitivity Analysis
- **Main Section:** 4. The PEST Control File
- **Subsection:** 

### Additional Summaries
- **Higher-Level Summary:** Figure 4.2 in PEST software displays control data section variables. The text details options for writing matrices, files, and parameters, including settings for matrix and file saving, operational modes, precision, derivative handling, and convergence criteria. Optional features like sensitivity reuse and LSQR algorithm for solving inverse problems are discussed.
- **Detailed Summary:** 

### Related Context
- **Previous Summary:** Figure 4.1 shows PEST control file variables; shaded variables are used by PEST++, some are optional.  The first line is "pcf". Values are space/tab delimited; strings with spaces are quoted.  Blank lines and comments (#) are allowed (PEST ≥15, PEST++ ≥4).  PEST++ ignores some sections (Table 4.1);  PEST++-specific variables use the "++" prefix.
- **Next Summary:** Figure 4.3 shows the "control data" section of a minimalist PEST control file, including RSTFLE, PESTMODE, NPAR, NOBS, NPARGP, NPRIOR, NOBSGP, NTPLFLE, NINSFLE, PRECIS, DPOINT, RLAMBDA1, RLAMFAC, PHIRATSUF, PHIREDLAM, NUMLAM, RELPARMAX, FACPARMAX, FACORIG, PHIREDSWH, NOPTMAX, PHIREDSTP, NPHISTP, NPHINORED, RELPARSTP, NRELPAR, ICOV, ICOR, and IEIG.  Some variables are optional, indicated by square brackets.

### Metadata
- **Keywords:** NOBS, NOBSGP, NPARGP, NPRIOR, NUMLAM, PHIRATSUF, PHIREDLAM, RLAMBDA1, RLAMFAC
- **Chunk ID:** c08ee11876f8
- **Chunk Index:** 1
- **Previous Chunk ID:** 4b679027f965
- **Next Chunk ID:** 3cf73a612e5f

---

## Context

### Summary
**To perform predictive analysis,  copy twofit.pst to twofit1.pst, changing PESTMODE to "prediction", increasing NOBS to 14, NOBSGP to 2, NTPLFLE and NINSFLE to 2, adding observation group "predict" and observation "o14" (weight=0.0),  changing the model command line to "model.bat", adding "in2.tpl in2.dat" and "out2.ins out2.dat" to the model input/output section, and adding a "predictive analysis" section (NPREDMAXMIN=1, PD0=5.0E-3, PD1=5.2E-3, PD2=1.0E-2, ABSPREDLAM=0.0, RELPREDLAM=0.005, ABSPREDSWH=0.0, RELPREDSWH=0.05, ABSPREDSTP=0.0, RELPREDSTP=0.005, NPREDNORED=4, NPREDSTP=4, INITSCHFAC=1.0, MULSHFAC=2.0, NSEARCH=1).**

### Header
**18.2.3 The PEST Control File**

### Content
We would now like to obtain the maximum possible value for the soil specific volume at a water content of 0.4 compatible with the model being calibrated against our laboratory dataset. Let us do this by assuming that the model can still be considered to be calibrated if the objective function under calibration conditions is as high as 5.0E-3; this is thus the value assigned to the predictive analysis control variable PD0.
The PEST control file used in the parameter estimation process was named twofit.pst. This file should be copied to file twofit1.pst and the following alterations made (actually this has already been done for you).
1. Replace the word “estimation” with the word “prediction” on the third line of this file.
2. When undertaking a predictive analysis run there is an extra observation, this being the model prediction. Hence the number of observations (i.e. NOBS) must be increased from 13 to 14 on the fourth line of file twofit1.pst.
3. There will now be two observation groups, so alter the fifth entry on line four of file
1. twofit1.pst (i.e. NOBSGP) to 2.
2. There are now two model input files and two model output files, so alter the first two entries on the fifth line of file twofit1.pst (i.e. NTPLFLE and NINSFLE) to 2 and 2 respectively.
3. In the “observation groups” section of the PEST control file add the observation group “predict”.
4. In the “observation data” section of the PEST control file add an extra observation named “o14”. Assign this to the observation group “predict”. Provide whatever observation value and weight that you like, as these will be ignored by PEST. It is probably best to make both of these 0.0, just in case you wish to run PEST later using the same file in “estimation” mode; by assigning the weight as zero, the “prediction observation” will contribute nothing to the objective function if that occurs.
5. Alter the model command line to “model.bat” in the “model command line” section of the new PEST control file.
6. The two model input files are named in1.dat and in2.dat; the first is used for the calibration component of the composite model, the second is used for the predictive component of the composite model. A PEST template file already exists for the first model input file (i.e. in.tpl). We will introduce a new template file for the second model input file shortly; it will be called in2.tpl. So alter the model input filename to in1.dat on the first line of the “model command line” section of file twofit1.pst; then add another line beneath this comprised of the entries “in2.tpl” and “in2.dat”.
7. The model output files are named out1.dat and out2.dat; the first is produced by the calibration component of the composite model while the second is produced by the predictive component of the composite model. A PEST instruction file already exists for the first model output file (i.e. out.ins). We will introduce a new instruction file for the second one shortly; it will be called out2.ins. So alter the model output filename to “out1.dat” on the third line of the “model command line” section of file twofit1.pst; then add another line underneath this comprised of the entries “out2.ins” and “out2.dat”.
8. Add a “predictive analysis” section to file twofit1.pst. Because we wish to maximise the prediction, NPREDMAXMIN is assigned the value of 1. As mentioned above, PD0 is 5.0E-3. Set PD1 to 5.2E-3 and set PD2 to be twice as high as PD0, i.e. 1.0E-2. Variables governing operation of the Marquardt lambda, the switching from two point to three point derivatives calculation, and the termination of execution will be set in relative rather than absolute terms, so set ABSPREDLAM, ABSPREDSWH and ABSPREDSTP to 0.0. RELPREDLAM, RELPREDSWH and RELPREDSTP should be set to their recommended values of .005, .05 and .005 respectively. NPREDNORED and NPREDSTP should be set at their recommended values of 4 and 4. Contrary to the advice provided in chapter 8, we will not conduct a line search for each Marquardt lambda, so set the control variables INITSCHFAC, MULSHFAC and NSEARCH to 1.0, 2.0 and 1 respectively.

### Source
- **File Name:** PEST Model-Independent Parameter Estimation. User Manual Part I: PEST, SENSAN and Global Optimisers
- **Main Section:** 18. A Simple PEST Example
- **Subsection:** 18.2 Predictive Analysis

### Additional Summaries
- **Higher-Level Summary:** The text describes using soil clod shrinkage data to fit two straight lines using Equation 18.1.1 with parameters s1, s2, y1, and xc in the pestex subfolder. The TWOLINE program reads parameters and water contents from in.dat, adjusts parameters using PEST, and generates input files for calculations. The final prediction value is 0.786.
- **Detailed Summary:** This text details the process of using soil clod shrinkage data for modeling. PEST software is employed to estimate parameters and generate input files for TWOLINE calculations. A composite model is run under calibration and prediction conditions, with specific steps outlined for predictive analysis. The final prediction value is 0.786.

### Related Context
- **Previous Summary:** A batch file (model.bat, Figure 18.15) runs a composite model:  first under calibration conditions (copying in1.dat to in.dat, running twoline, copying out.dat to out1.dat), then under prediction conditions (using in2.dat and out2.dat).  Intermediate files are deleted beforehand to prevent errors if the model fails to run. Screen output is suppressed using `> nul`.  Test the composite model by typing "model" at the prompt and examining out1.dat and out2.dat.
- **Next Summary:** in2.tpl and out2.ins (provided) are, respectively, a template for in2.dat and an instruction file for reading the prediction from out2.dat.  Both in.tpl and in2.tpl contain parameter spaces for parameters used in both calibration and prediction model runs; these parameters are written to both input files before running the composite model.

### Metadata
- **Keywords:** ABSPREDLAM, ABSPREDSTP, ABSPREDSWH, INITSCHFAC, NINSFLE, NOBS, NOBSGP, NPREDMAXMIN, NPREDNORED, NPREDSTP, NSEARCH, NTPLFLE, PD0, PD1, PD2, RELPREDLAM, RELPREDSTP, RELPREDSWH
- **Chunk ID:** 1ffe0658b6e3
- **Chunk Index:** 1
- **Previous Chunk ID:** 17e0b111d896
- **Next Chunk ID:** c96a8534c7bf

---
