# Search Results for: What is NPARGP?

Keywords: npargp

## Variations
1. What is NPARGP?
2. define NPARGP
3. explain what NPARGP is
4. describe NPARGP
5. tell me about NPARGP


## Context

### Summary
**Each parameter belongs to a parameter group (PARGP), defined in the "parameter groups" section (Figure 4.7).  Groups manage finite-difference derivative calculations (section 3.5).  Group names (≤12 characters, ≤6 recommended) are used by ADDREG1.  Fixed/tied parameters can belong to the "none" group.**

### Header
**4.8.1 General**

### Content
Every parameter must belong to a parameter group; the group to which each parameter belongs is supplied through the parameter-specific PARGP variable supplied in the “parameter data” section of the PEST control file.
Each parameter group must possess a unique name of twelve characters or less in length. However it is strongly recommended that the name be six characters or less in length. As is described in part II of this manual, the ADDREG1 utility (which adds Tikhonov regularisation to a PEST control file) groups prior information equations associated with different parameter groups into different regularisation groups. A prefix of “regul_” is appended to parameter group names in formulating prior information group names. Hence the last six characters of each parameter group are lost in formulating the prior information group name. Uniqueness of prior information group names can then be lost.
Notwithstanding the role of the ADDREG1 utility, the primary purpose of parameter groups is to provide a basis for assignment of variables which govern calculation of finite-difference derivatives. These variables are assigned to parameter groups, rather than to individual parameters, because the number of the latter may be very large in many inversion contexts.
A tied or fixed parameter can be a member of a group; however, as derivatives are not calculated with respect to such parameters, the group to which these parameters belong is of no significance (except, perhaps, in calculating the derivative increment for adjustable group members if the increment type is “rel_to_max” - see below). Hence fixed or tied parameters can be assigned to the dummy group “none” (though this is not recommended practice – see below). If a parameter is assigned to any group other than “none” in the “parameter data” section of the PEST control file, the properties for that group must be defined in the “parameter groups” section of the PEST control file.
The many options available for finite-difference derivatives calculation are discussed in section 3.5 of this manual, as are the variables which control these options. That discussion will not be repeated here. Only a short description of the role of each variable is presented below; the reader is referred to section 3.5 for further details.
Specifications of the “parameter groups” section of the PEST control file are provided in figure 4.7.
|* parameter groups|PARGPNME|INCTYP|DERINC|DERINCLB|FORCEN|DERINCMUL|DERMTHD|[SPLITTHRESH|SPLITRELDIFF|SPLITACTION]|
|---|---|---|---|---|---|---|---|---|---|---|
|(one such line for each of NPARGP parameter groups)|(one such line for each of NPARGP parameter groups)|(one such line for each of NPARGP parameter groups)|(one such line for each of NPARGP parameter groups)|(one such line for each of NPARGP parameter groups)|(one such line for each of NPARGP parameter groups)|(one such line for each of NPARGP parameter groups)|(one such line for each of NPARGP parameter groups)|(one such line for each of NPARGP parameter groups)|(one such line for each of NPARGP parameter groups)|(one such line for each of NPARGP parameter groups)|

### Source
- **File Name:** PEST Model-Independent Parameter Estimation. User Manual Part I: PEST, SENSAN and Global Optimisers
- **Main Section:** 4. The PEST Control File
- **Subsection:** 4.8 Parameter Groups Section

### Additional Summaries
- **Higher-Level Summary:** Figure 4.2 in PEST software displays control data section variables. The text details options for writing matrices, files, and parameters, including settings for matrix and file saving, operational modes, precision, derivative handling, and convergence criteria. Optional features like sensitivity reuse and LSQR algorithm for solving inverse problems are discussed.
- **Detailed Summary:** Parameters are grouped in PARGP, defined in "parameter groups" (Figure 4.7), managing finite-difference derivatives (section 3.5). Group names (≤12 characters, ≤6 recommended) are used by ADDREG1. Fixed/tied parameters can be in the "none" group. INCTYP, DERINC, DERINCLB, FORCEN, DERINCMUL, DERMTHD, SPLITHRESH, SPLITRELDIFF, and SPLITACTION are key factors in derivative calculations.

### Related Context
- **Previous Summary:** The optional "svd assist" section (detailed in Chapter 10) is required for SVD-assisted inversion, typically created by the SVDAPREP utility; manual editing is uncommon.
- **Next Summary:** The "parameter groups" section defines parameters groups (PARGPNME, ≤12 characters). Each parameter belongs to a group;  "none" is reserved for fixed/tied parameters but not recommended. INCTYP ("relative", "absolute", "rel_to_max") and DERINC determine parameter increments. DERINCLB sets a minimum increment for "relative" and "rel_to_max". FORCEN ("always_2", "always_3", "always_5", "switch", "switch_5") selects the derivative calculation method (forward, central, or five-point).

### Metadata
- **Keywords:** * parameter groups, DERINC, DERINCLB, DERINCMUL, DERMTHD, FORCEN, INCTYP, NPARGP, PARGP, PARGPNME, SPLITACTION, SPLITRELDIFF, SPLITTHRESH
- **Chunk ID:** 9b56d8222dfb
- **Chunk Index:** 1
- **Previous Chunk ID:** dbabd2d08ecd
- **Next Chunk ID:** 4b6bd44180d5

---

## Context

### Summary
**NPAR (total parameters), NOBS (observations, excluding dummy), NPARGP (parameter groups), NPRIOR (prior information items), and NOBSGP (observation groups) are integer variables in the PEST control file.  In "estimation" mode, adjustable parameters should not exceed weighted observations plus prior information, unless using SVD or LSQR. MAXCOMPDIM (optional) activates compressed Jacobian matrix storage.**

### Header
**4.2.4 Third Line**

### Content
NPAR
This is the total number of parameters featured in the current PEST case, including adjustable, fixed and tied parameters; NPAR must be supplied as an integer.
NOBS
This integer variable represents the total number of observations featured in the current case. Note that, when counting the number of observations, dummy observations (see chapter 2) that may be featured in one or a number of instruction files are ignored.
NPARGP
This is the number of parameter groups. Recall from the previous chapter that the variables which govern the operation of finite-difference derivatives are assigned to parameter groups. Parameter grouping can also be of importance where the ADDREG1 utility described in part II of this manual is employed to add preferred value Tikhonov regularisation to a PEST control file. NPARGP is an integer variable.
NPRIOR
NPRIOR, another integer variable, is the number of articles of prior information that are included in the parameter estimation process. If there are no articles of prior information, NPRIOR must be zero. If PEST is running in “estimation” mode, then you should ensure that the number of adjustable parameters is less than or equal to the number of observations for which there are non-zero weights plus the number of articles of prior information for which there are non-zero weights. If this is not the case, then the inverse problem cannot possibly have a unique solution. Furthermore, unless solution of this nonunique inverse problem is sought using singular value decomposition or LSQR, PEST may make little progress in lowering the objective function because the XtQX matrix appearing in equation 5.2.9 of Doherty (2015) will be singular and hence non-invertible. Sadly, nonuniqueness is the rule rather than the exception when calibrating environmental models. PEST is not troubled by parameter nonuniqueness if Tikhonov regularisation is introduced to the inverse problem, and if singular value decomposition or LSQR is used in solution of that problem. Because of the prevalence of nonuniqueness in environmental model calibration, this should be done as a matter of course. (The outnumbering of observations by parameters does not create a numerical problem if singular value decomposition or LSQR are used to solve the inverse problem, despite the noninvertability of XtQX.)
NOBSGP
NOBSGP, another integer variable, is the number of observation groups featured in the PEST control file. Each observation and each prior information equation must be assigned to an observation group (they can all be assigned to the same group if desired). When PEST evaluates the total objective function it also evaluates the contribution made to this total by each observation group.
MAXCOMPDIM
MAXCOMPDIM is an optional integer variable. It is used to activate compressed internal storage of the Jacobian matrix by PEST. This can slow PEST execution. At the same time it can allow PEST to undertake very highly parameterized inversion wherein adjustable parameters may number in the tens of thousands. This is further discussed in section 15.4.

### Source
- **File Name:** PEST Model-Independent Parameter Estimation. User Manual Part I: PEST, SENSAN and Global Optimisers
- **Main Section:** 4. The PEST Control File
- **Subsection:** 4.2 Control Data Section

### Additional Summaries
- **Higher-Level Summary:** Figure 4.2 in PEST software displays control data section variables. The text details options for writing matrices, files, and parameters, including settings for matrix and file saving, operational modes, precision, derivative handling, and convergence criteria. Optional features like sensitivity reuse and LSQR algorithm for solving inverse problems are discussed.
- **Detailed Summary:** Figure 4.2 shows "control data" section variables (from Appendix A, Figure A1.1).  Some variables are discussed later. The first line must be "* control data";  some variables are optional (in brackets).

### Related Context
- **Previous Summary:** RSTFLE ("restart" or "norestart") enables PEST's restart capability (Appendix B). PESTMODE ("estimation", "prediction", "regularisation", or "pareto") selects the operational mode;  additional mode-specific sections may be included.
- **Next Summary:** DERZEROLIM (optional) defines a Jacobian matrix zero threshold for compressed storage. NTPLFLE is the number of template files; NINSFLE is the number of instruction files. PRECIS ("single" or "double") sets precision. DPOINT ("point" or "nopoint") controls decimal point inclusion. NUMCOM, JACFILE, MESSFILE (Chapter 12) handle model-calculated derivatives. OBSREREF (Chapter 14) activates observation re-referencing.

### Metadata
- **Keywords:** MAXCOMPDIM, NOBS, NOBSGP, NPAR, NPARGP, NPRIOR
- **Chunk ID:** 26873b456a9c
- **Chunk Index:** 1
- **Previous Chunk ID:** 9b2451e25955
- **Next Chunk ID:** e611a7673cad

---

## Context

### Summary
**NPAR, NOBS, NPARGP, NPRIOR, and NOBSGP (integers, >0 except NPRIOR which can be 0) specify parameter, observation, and group counts from respective PEST control file sections.  PEST++ programs only use the first variable on this line; however, PESTCHEK requires correct values for all variables.**

### Header
**4.6.4 Third Line **

### Content
Although programs of the PEST++ suite read only the first variable on this line, the other variables that are featured on this line in figure 4.3 must be set to correct values to pass the scrutiny of PESTCHEK. All of these variables are integers. Their values must be greater than zero, except for NPRIOR which can be zero.
NPAR is the number of parameters featured in the “parameter data” section of a PEST control file. NOBS is the number of observations featured in the “observation data” section of a PEST control file. NPARGP is the number of parameter groups featured in the “parameter groups” section, while NPRIOR is the number of prior information equations featured in the “prior information” section of a PEST control file. The final variable on this line (NOBSGP) is the number of observation groups featured in the “observation groups” section of a PEST control file.

### Source
- **File Name:** PEST Model-Independent Parameter Estimation: PEST++ a Software Suite for Parameter Estimation, Uncertainty Analysis, Management Optimization and Sensitivity Analysis
- **Main Section:** 4. The PEST Control File
- **Subsection:** 4.6 Control Data Section

### Additional Summaries
- **Higher-Level Summary:** Figure 4.2 in PEST software displays control data section variables. The text details options for writing matrices, files, and parameters, including settings for matrix and file saving, operational modes, precision, derivative handling, and convergence criteria. Optional features like sensitivity reuse and LSQR algorithm for solving inverse problems are discussed.
- **Detailed Summary:** The optional "automatic user intervention" section (section 6.3) governs automatic user intervention, activated by setting DOAUI to "doaui" in the "control data" section.  If omitted, default values are used.

### Related Context
- **Previous Summary:** RSTFLE ("restart") enables PEST's restart capability. PESTMODE ("estimation" or "regularization") sets the operational mode;  "regularization" mode uses the "regularization" section (or defaults if absent).
- **Next Summary:** NTPFLE and NINSFLE (integers >1) specify template and instruction file counts.  PRECIS ("single") and DPOINT ("point") control parameter value formatting (not used by PEST++). NUMCOM (integer, 1 or omitted for single command lines) specifies the number of model command lines.  These variables are used by PEST but not PEST++.

### Metadata
- **Keywords:** NOBS, NOBSGP, NPAR, NPARGP, NPRIOR
- **Chunk ID:** 255d2e8af039
- **Chunk Index:** 1
- **Previous Chunk ID:** 07ced7dc7c05
- **Next Chunk ID:** 9813ada0b4b7

---

## Context

### Summary
**Figure 4.3 shows the "control data" section of a minimalist PEST control file, including RSTFLE, PESTMODE, NPAR, NOBS, NPARGP, NPRIOR, NOBSGP, NTPLFLE, NINSFLE, PRECIS, DPOINT, RLAMBDA1, RLAMFAC, PHIRATSUF, PHIREDLAM, NUMLAM, RELPARMAX, FACPARMAX, FACORIG, PHIREDSWH, NOPTMAX, PHIREDSTP, NPHISTP, NPHINORED, RELPARSTP, NRELPAR, ICOV, ICOR, and IEIG.  Some variables are optional, indicated by square brackets.**

### Header
**4.6.1 General**

### Content
Variables appearing in the “control data” section of a minimalist PEST control file are shown in figure 4.3 (which is reproduced from figure 4.1).
* control data
RSTFLE PESTMODE
NPAR NOBS NPARGP NPRIOR NOBSGP
NTPLFLE NINSFLE PRECIS DPOINT [NUMCOM]
RLAMBDA1 RLAMFAC PHIRATSUF PHIREDLAM NUMLAM
RELPARMAX FACPARMAX FACORIG
PHIREDSWH
NOPTMAX PHIREDSTP NPHISTP NPHINORED RELPARSTP NRELPAR
ICOV ICOR IEIG
Figure 4.3 Variables appearing in the “control data” section of a PEST control file.

### Source
- **File Name:** PEST Model-Independent Parameter Estimation: PEST++ a Software Suite for Parameter Estimation, Uncertainty Analysis, Management Optimization and Sensitivity Analysis
- **Main Section:** 4. The PEST Control File
- **Subsection:** 4.6 Control Data Section

### Additional Summaries
- **Higher-Level Summary:** Figure 4.2 in PEST software displays control data section variables. The text details options for writing matrices, files, and parameters, including settings for matrix and file saving, operational modes, precision, derivative handling, and convergence criteria. Optional features like sensitivity reuse and LSQR algorithm for solving inverse problems are discussed.
- **Detailed Summary:** The optional "automatic user intervention" section (section 6.3) governs automatic user intervention, activated by setting DOAUI to "doaui" in the "control data" section.  If omitted, default values are used.

### Related Context
- **Previous Summary:** PESTCHEK verifies PEST input datasets (control, template, and instruction files), checking for syntax errors and consistency (including parameter/observation counts, bounds, transformations, and prior information). It ignores PEST++-specific variables ("++" prefix) but can partially check PEST++ datasets.  Use `pestchek case`; the `/s` switch omits template/instruction file checks. *CHECK_TPLINS* (Boolean) controls parameter/observation alignment checks.
- **Next Summary:** The PEST control file's "control data" section must begin with the line "* control data", where the asterisk is followed by a space.

### Metadata
- **Keywords:** * control data, DPOINT, FACORIG, FACPARMAX, ICOR, ICOV, IEIG, NINSFLE, NOBS, NOBSGP, NOPTMAX, NPAR, NPARGP, NPHINORED, NPHISTP, NPRIOR, NRELPAR, NTPLFLE, NUMCOM, NUMLAM, PESTMODE, PHIRATSUF, PHIREDLAM, PHIREDSTP, PHIREDSWH, PRECIS, RELPARMAX, RELPARSTP, RLAMBDA1, RLAMFAC, RSTFLE
- **Chunk ID:** 3cf73a612e5f
- **Chunk Index:** 1
- **Previous Chunk ID:** c08ee11876f8
- **Next Chunk ID:** c11d3d4e62ec

---

## Context

### Summary
**TPL2PST uses a keyword-based input file (Figure 4.2) to create a partial PEST control file.  Each "template_file" block (template_file, model_input_file) may contain "parameter_type" subblocks (transform, value, lower_bound, upper_bound, pargroup).  Parameter types are defined by a text string in the parameter name.  The output contains parameter groups based on parameter types;  tied parameters require manual editing.  Errors halt execution.**

### Header
**4.3.4 Keywords**

### Content
Within each block or subblock, data entry follows the keyword protocol. First a keyword is provided. The value of a variable that is associated with that keyword follows. Optionally, a “=” symbol may separate the two.
Each “template_file” block must contain a single “template_file” keyword and a single “model_input_file” keyword. These keywords must NOT appear within a “parameter_type” subblock. The first of these keywords informs TPL2PST of the name of the template file that
is associated with the “template_file” block. TPL2PST must read this file in order to obtain the names of all parameters that then become associated with that block. The second keyword informs TPL2PST of the model input file that corresponds to the template file. Both of these filenames are recorded in the “model input/output” section of the partial PEST control file that TPL2PST writes.
As is apparent from the example in figure 4.2, each “parameter_type” block must contain the following keywords. These can also appear within the general “template_file” block to which the “parameter_type” block belongs; in the latter case they pertain to the default parameter type for that “template_file” block (if a default parameter type exists). Any “parameter_type” subblock must contain all of these keywords. If any of them are present outside of a “parameter type” block in the main part of the “template_file” block, then all of them must be present. These keywords are:
- transform
- value
- lower_bound
- upper_bound
- pargroup
The values that are assigned to these keywords are transferred to the “parameter data” section of the partial PEST control file that TPL2PST writes. All parameters of the same type are assigned the same initial values, lower and upper bounds, transformation type and parameter group. You can alter these in the PEST control file that TPL2PST writes if you wish.
The value supplied for “transform” must be “none”, “log” or “fixed”. “Tied” is not allowed; if you wish to tie one parameter to another, you must do this yourself in the PEST control file that TPL2PST writes.
The name of a parameter group must be supplied through the “pargroup” keyword. This name cannot be repeated in any other block or subblock. Thus the partial PEST control file that TPL2PST writes will feature as many parameter groups as there are “parameter_type” subblocks (including default parameter type subblocks) in all “template_file” blocks within its input file. (This makes it easy for the ADDREG1 and ADDREG2 utilities to ascribe prior information equations to different parameter groups that are based on different parameter types. This, in turn, allows easy assignment of covariance matrices to different prior information groups. As is stated in documentation for ADDREG1 and ADDREG2, it is wise to limit parameter group names to 6 characters or less in length so that when they are prefixed with the string “regul”, the 12 character limit on observation group name length is respected.)
Note the following:
- Keywords can be provided in any order within a block or subblock.
- If the value associated with a keyword is a text string, then it can be enclosed in quotes. This is mandatory if it is the name of a file and that name contains a space.
- No two “template_file” blocks can cite the same template file. Nor can they cite the same model input file.
- TPL2PST checks for data inconsistencies; it reports them as error messages. Thus, for example, if you supply “transform” as “log” and provide “value” as a negative number, TPL2PST will terminate execution with an explicatory error message.
- If the lower bound provided in a “parameter_type” block is positive, TPL2PST sets the PARCHLIM variable for all parameters of that type in the block‑associated
template file to “factor”. Otherwise it is set to “relative”. Alter these in the TPL2PST‑generated partial PEST control file if they are inappropriate.
- TPL2PST objects if the same parameter is cited in more than one template file. However it will raise no objections if the same parameter is cited many times in a single template file.
- In writing the “parameter groups” section of its partial PEST control file, TPL2PST provides values for variables which affect finite‑difference derivatives calculation. Alter these if they are inappropriate.
- When writing the “control data” section of its partial PEST control file, TPL2PST provides values for the NPAR, NPARGP and NTPLFLE variables which are consistent with information that it has obtained from its input file, and from template files cited therein. NOBS and NOBSGP are set to 0 as the “observation group” and “observation data” sections of the partial PEST control file that it writes are empty.

### Source
- **File Name:** PEST Model-Independent Parameter Estimation User Manual Part II: PEST Utility Support Software
- **Main Section:** 4. Building and Altering a PEST Control File
- **Subsection:** 4.3 TPL2PST

### Additional Summaries
- **Higher-Level Summary:** Figure 4.2 in PEST software displays control data section variables. The text details options for writing matrices, files, and parameters, including settings for matrix and file saving, operational modes, precision, derivative handling, and convergence criteria. Optional features like sensitivity reuse and LSQR algorithm for solving inverse problems are discussed.
- **Detailed Summary:** TPL2PST generates a partial PEST control file by populating specific sections from template files, useful for models with many parameters. Manual editing and additional steps are needed to finalize the file. The input file uses blocks to specify template files, model input files, and parameter details. Parameters are ordered by type in the output file. Run TPL2PST with `tpl2pst infile pestfile`.

### Related Context
- **Previous Summary:** TPL2PST's input file uses "start template_file"/"end template_file" blocks, optionally containing "start parameter_type"/"end parameter_type" subblocks (defining parameter types).  Parameters are ordered by type in the output PEST control file. A parameter's type is identified by a text string (specified by the "text" keyword) within its name; parameters not assigned to a type are assigned to a default type.  Multiple parameter types per template file are allowed.
- **Next Summary:** Run TPL2PST using `tpl2pst infile pestfile`; infile is the input file, and pestfile is the name of the output partial PEST control file (recommended extension: .pst).

### Metadata
- **Keywords:** NOBS, NOBSGP, NPAR, NPARGP, NTPLFLE
- **Chunk ID:** f47e57b7578b
- **Chunk Index:** 1
- **Previous Chunk ID:** 719e8029835e
- **Next Chunk ID:** 51cac29a6097

---
